<div id="gameContainer" ng-controller="gamesController">
    <table ng-repeat="game in games track by $index" class="table table-striped table-hover">
        <tr>
            <td><label>{{$index}}</label></td>
            <td><select ng-model="game.season" required ng-options='option for option in SEASONS'></select></td>
            <td><p class="input-group datepicker-group">
                <input type="text" class="form-control"
                       datepicker-popup="{{gameDate[$index].format}}"
                       ng-model="game.date"
                       is-open="gameDate[$index].isOpened"
                       datepicker-options="gameDate[$index].options"
                       ng-required="true"
                       close-text="Close" />
                <span class="input-group-btn"><button type="button" class="btn btn-default"
                                                      ng-click="openDatePicker($event, $index)">
                    <i class="glyphicon glyphicon-calendar"></i>
                </button></span>
            </p></td>
            <td><select ng-model="game.result" required ng-options='option for option in RESULTS'></select></td>
            <td><input auto-complete ui-items="ALL_PLAYERS" ng-model="game.master"></td>
            <td><button ng-click="showPlayers(game)">Show/Hide details</button></td>
            <td><button ng-click="saveGame(game)">Update Game</button></td>
            <td><button ng-click="deleteGame(game.id)">Delete Game</button></td>
        </tr>
        <tr><td colspan="8">
            <table class="table table-striped table-hover">
                <thead>
                <th>Number</th>
                <th>NickName</th>
                <th>Role</th>
                <th>Life</th>
                <th>Best Voices</th>
                <th>Final Decision</th>
                <th>Fouls</th>
                </thead>
                <tr ng-repeat="player in game.players track by $index">
                    <td>{{$index+1}}</td>
                    <td><input auto-complete ui-items="ALL_PLAYERS" ng-model="player.member.nickname"></td>
                    <td><select ng-model="player.role" required ng-options='option for option in ROLES'></select></td>
                    <td><select ng-model="player.life" required ng-options='option for option in LIVES'></select></td>
                    <td><select ng-model="player.bestVoices" required ng-options='option for option in intRange(PLAYERS_AMOUNT)'></select></td>
                    <td><select ng-model="player.finalDecision" required ng-options='option for option in intRange(PLAYERS_AMOUNT)'></select></td>
                    <td><select ng-model="player.fouls" required ng-options='option for option in intRange(PLAYERS_AMOUNT)'></select></td>
                </tr>
            </table>
        </td></tr>
    </table>
</div>